<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>KeshavCare â€“ V53 OPD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="app">

        <div class="header">
            <div>
                <h1>KeshavCare â€“ V53</h1>
                <p>Section-wise OPD dictation with audio feedback</p>
            </div>
            <div class="status-chip">
                <div id="statusDot" class="status-dot"></div>
                <span id="statusText">Mic is idle</span>
            </div>
        </div>

        <div class="patient-row">
            <input placeholder="Patient name">
            <input placeholder="Visit ID / MRN">
            <select id="languageSelect">
                <option value="en-IN">English</option>
                <option value="hi-IN">Hindi</option>
                <option value="te-IN">Telugu</option>
            </select>
        </div>

        <div class="global-toolbar">
            <button class="danger" onclick="clearAll()">ğŸ§¹ Clear all</button>
            <button class="success" onclick="downloadText()">â¬‡ï¸ Download Text</button>
        </div>

        <div class="sheet">
            <div class="section-card" data-section="complaints">
                <div class="section-header">
                    <h3>1. Complaints</h3>
                    <button class="primary section-mic" data-section="complaints">ğŸ™ï¸ Start Listening</button>
                </div>
                <ul id="complaints"></ul>
            </div>

            <div class="section-card" data-section="history">
                <div class="section-header">
                    <h3>2. History</h3>
                    <button class="primary section-mic" data-section="history">ğŸ™ï¸ Start Listening</button>
                </div>
                <ul id="history"></ul>
            </div>

            <div class="section-card" data-section="exam">
                <div class="section-header">
                    <h3>3. Examination</h3>
                    <button class="primary section-mic" data-section="exam">ğŸ™ï¸ Start Listening</button>
                </div>
                <ul id="exam"></ul>
            </div>

            <div class="section-card" data-section="investigations">
                <div class="section-header">
                    <h3>4. Investigations</h3>
                    <button class="primary section-mic" data-section="investigations">ğŸ™ï¸ Start Listening</button>
                </div>
                <ul id="investigations"></ul>
            </div>

            <div class="section-card" data-section="advice">
                <div class="section-header">
                    <h3>5. Advice</h3>
                    <button class="primary section-mic" data-section="advice">ğŸ™ï¸ Start Listening</button>
                </div>
                <ul id="advice"></ul>
            </div>

            <div class="section-card" data-section="Summary">
                <div class="section-header">
                    <h3>6. Summary</h3>
                    <button id="Summary" class="primary" data-section="Summary">ğŸ™ï¸ Start Listening</button>
                </div>
                <p id="showAllContent"></p>
                
            </div>

            <ul id="finalNotesList" hidden></ul>
        </div>
    </div>

    <div id="undoToast">
        Note deleted
        <button onclick="undoDelete()">Undo</button>
    </div>
    <script>
        /* ğŸ™ SPEECH */
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.interimResults = false;
        recognition.continuous = false;


        let recognizing = false;
        let activeSection = null;
        let activeButton = null;
        let session = 0, activeSession = null;


        /* ğŸ—‘ï¸ UNDO */
        let lastDeleted = null, lastParent = null, undoTimer = null;

        /* this variable is for running two different functionalities in onresult */
        let IscontinuousListening = false;

    </script>

    <script src="Index/Js/entryFile.js" type="module"></script>
</body>

</html>